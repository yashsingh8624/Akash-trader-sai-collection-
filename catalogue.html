<!DOCTYPE html>
<html lang="hi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Catalogue - Aakash Traders & Sai Collection</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
  <style>
    /* Same styles as before + Quantity controls */
    body { font-family: 'Poppins', sans-serif; margin: 0; padding: 0; background: #f8f9fa; }
    .top-bar { display: flex; align-items: center; justify-content: space-between; padding: 10px 15px; background: #fff; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
    .logo { font-weight: 600; font-size: 18px; color: #333; }
    .cart-icon { font-size: 24px; cursor: pointer; position: relative; }
    #cartCount { background: #25D366; color: white; border-radius: 50%; padding: 2px 6px; font-size: 12px; position: absolute; top: -5px; right: -5px; }
    .menu-toggle { display: flex; flex-direction: column; cursor: pointer; }
    .menu-toggle span { width: 25px; height: 3px; background: #333; margin: 3px 0; transition: 0.3s; }
    .side-menu { position: fixed; right: -250px; top: 0; width: 250px; height: 100vh; background: white; box-shadow: -5px 0 15px rgba(0,0,0,0.1); transition: 0.3s; z-index: 1000; padding-top: 70px; }
    .side-menu.open { right: 0; }
    .side-menu a { display: block; padding: 15px 20px; text-decoration: none; color: #333; border-bottom: 1px solid #eee; }
    .side-menu a.active { background: #25D366; color: white; }
    .catalogue-hero { text-align: center; padding: 40px 20px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; }
    .catalogue-hero h1 { font-size: 2.5rem; margin-bottom: 20px; }
    .hero-image { width: 100%; max-width: 600px; height: 300px; object-fit: cover; border-radius: 15px; box-shadow: 0 10px 30px rgba(0,0,0,0.3); }
    .products-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 25px; padding: 40px 20px; max-width: 1200px; margin: 0 auto; }
    .product-card { background: white; border-radius: 15px; overflow: hidden; box-shadow: 0 8px 25px rgba(0,0,0,0.1); transition: 0.3s; cursor: pointer; }
    .product-card:hover { transform: translateY(-10px); box-shadow: 0 20px 40px rgba(0,0,0,0.2); }
    .product-image { width: 100%; height: 220px; object-fit: cover; }
    .product-info { padding: 20px; }
    .product-name { font-weight: 600; margin-bottom: 8px; color: #333; font-size: 16px; }
    .product-price { font-size: 20px; font-weight: 700; color: #25D366; margin-bottom: 15px; }
    
    /* QUANTITY CONTROLS */
    .quantity-control { display: flex; align-items: center; gap: 10px; margin-bottom: 15px; }
    .qty-btn { width: 35px; height: 35px; border: 2px solid #ddd; background: white; border-radius: 50%; cursor: pointer; font-size: 18px; font-weight: bold; transition: 0.3s; }
    .qty-btn:hover { background: #25D366; color: white; border-color: #25D366; }
    .qty-input { width: 50px; height: 35px; border: 2px solid #ddd; border-radius: 8px; text-align: center; font-size: 16px; font-weight: 600; }
    .add-to-cart { width: 100%; padding: 12px; background: linear-gradient(45deg, #25D366, #128C7E); color: white; border: none; border-radius: 10px; font-size: 16px; font-weight: 600; cursor: pointer; transition: 0.3s; }
    .add-to-cart:hover { transform: translateY(-2px); box-shadow: 0 8px 20px rgba(37,211,102,0.4); }
    
    .zoom-modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); z-index: 2000; }
    .zoom-modal img { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); max-width: 90%; max-height: 90%; border-radius: 10px; }
    .close { position: absolute; top: 20px; right: 30px; color: white; font-size: 40px; cursor: pointer; }
    .whatsapp-float { position: fixed; width: 60px; height: 60px; bottom: 20px; right: 20px; background: #25D366; color: white; border-radius: 50%; text-align: center; font-size: 30px; box-shadow: 0 4px 15px rgba(37,211,102,0.4); z-index: 100; cursor: pointer; }
    .cart-popup { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 1000; }
    .cart-box { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); background: white; padding: 30px; border-radius: 15px; max-width: 400px; width: 90%; max-height: 80vh; overflow-y: auto; }
    @media (max-width: 768px) {
      .catalogue-hero h1 { font-size: 2rem; }
      .hero-image { height: 250px; }
      .products-grid { grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); padding: 20px 10px; }
      .product-info { padding: 15px; }
    }
  </style>
</head>
<body>
  <!-- Header -->
  <header class="top-bar">
    <div class="logo">Aakash Traders & Sai Collection</div>
    <div class="cart-icon" onclick="toggleCart()">
      üõí <span id="cartCount">0</span>
    </div>
    <div class="menu-toggle" onclick="toggleMenu()">
      <span></span><span></span><span></span>
    </div>
  </header>

  <!-- Side Menu -->
  <nav id="sideMenu" class="side-menu">
    <a href="index.html">üè† Home</a>
    <a href="catalogue.html" class="active">üì¶ Catalogue</a>
    <a href="about.html">‚ÑπÔ∏è About</a>
    <a href="contact.html">üìû Contact</a>
  </nav>

  <!-- Hero Section -->
  <section class="catalogue-hero">
    <h1>Our Collection</h1>
    <img src="https://res.cloudinary.com/dhsq8cphw/image/upload/v1766742910/jean_idt8rv.jpg" 
         alt="Featured Collection" class="hero-image" onclick="zoomImage(this)">
  </section>

  <!-- Products Grid -->
  <section class="products-grid" id="productsGrid">
    <!-- Products from Google Sheet -->
  </section>

  <!-- Zoom Modal -->
  <div id="zoomModal" class="zoom-modal">
    <span class="close" onclick="closeZoom()">&times;</span>
    <img id="zoomImg" alt="Zoomed Image">
  </div>

  <!-- Cart Popup -->
  <div id="cartPopup" class="cart-popup">
    <div class="cart-box">
      <h3>üõí Your Cart</h3>
      <div id="cartItems"></div>
      <h4 id="cartTotal">Total: ‚Çπ0</h4>
      <button onclick="orderOnWhatsApp()" class="add-to-cart">Order on WhatsApp</button>
      <button onclick="toggleCart()" style="margin-top:10px; background:#ff4444; color:white;">Close</button>
    </div>
  </div>

  <!-- WhatsApp Float -->
  <a href="https://wa.me/918624091826" class="whatsapp-float" title="Order Now">üí¨</a>

  <!-- COMPLETE CART + QUANTITY SCRIPT -->
  <script>
    // Basic cart data structure
    let cart = JSON.parse(localStorage.getItem('cart')) || {};
    let products = [];

    // Update cart count
    function updateCartCount() {
      const totalItems = Object.values(cart).reduce((sum, item) => sum + item.qty, 0);
      document.getElementById('cartCount').textContent = totalItems;
    }

    // Quantity controls
    function changeQty(productId, change) {
      if (!cart[productId]) {
        cart[productId] = { qty: 0, price: products.find(p => p.id === productId)?.price || 0 };
      }
      cart[productId].qty = Math.max(0, cart[productId].qty + change);
      if (cart[productId].qty === 0) {
        delete cart[productId];
      }
      localStorage.setItem('cart', JSON.stringify(cart));
      updateCartCount();
      renderCart();
    }

    // Add to cart
    function addToCart(productId) {
      changeQty(productId, 1);
      alert('Added to cart! üõí');
    }

    // Toggle cart popup
    function toggleCart() {
      const popup = document.getElementById('cartPopup');
      popup.style.display = popup.style.display === 'block' ? 'none' : 'block';
      if (popup.style.display === 'block') renderCart();
    }

    // Render cart
    function renderCart() {
      const cartItems = document.getElementById('cartItems');
      const cartTotal = document.getElementById('cartTotal');
      
      if (Object.keys(cart).length === 0) {
        cartItems.innerHTML = '<p>Your cart is empty</p>';
        cartTotal.textContent = 'Total: ‚Çπ0';
        return;
      }

      let html = '';
      let total = 0;
      for (let id in cart) {
        const item = cart[id];
        const product = products.find(p => p.id === id);
        const itemTotal = item.qty * item.price;
        total += itemTotal;
        html += `
          <div style="display:flex; justify-content:space-between; margin-bottom:15px; padding-bottom:15px; border-bottom:1px solid #eee;">
            <div>
              <strong>${product?.name || 'Product'}</strong><br>
              <small>‚Çπ${item.price} x ${item.qty}</small>
            </div>
            <div style="display:flex; align-items:center; gap:10px;">
              <button onclick="changeQty('${id}', -1)" style="width:30px;height:30px;border-radius:50%;border:1px solid #ddd;">-</button>
              <span style="min-width:30px;text-align:center;">${item.qty}</span>
              <button onclick="changeQty('${id}', 1)" style="width:30px;height:30px;border-radius:50%;border:1px solid #ddd;">+</button>
              <span>‚Çπ${itemTotal}</span>
            </div>
          </div>
        `;
      }
      cartItems.innerHTML = html;
      cartTotal.textContent = `Total: ‚Çπ${total}`;
    }

    // WhatsApp order
    function orderOnWhatsApp() {
      let message = 'üõí Order Details:

';
      let total = 0;
      for (let id in cart) {
        const item = cart[id];
        const product = products.find(p => p.id === id);
        message += `‚Ä¢ ${product?.name || 'Product'} x ${item.qty} = ‚Çπ${item.qty * item.price}
`;
        total += item.qty * item.price;
      }
      message += `
üí∞ Total: ‚Çπ${total}`;
      window.open(`https://wa.me/918624091826?text=${encodeURIComponent(message)}`);
    }

    // Menu functions
    function toggleMenu() {
      document.getElementById("sideMenu").classList.toggle("open");
    }
    
    function closeZoom() {
      document.getElementById("zoomModal").style.display = "none";
    }
    
    function zoomImage(img) {
      document.getElementById("zoomImg").src = img.src;
      document.getElementById("zoomModal").style.display = "block";
    }

    // Initialize
    updateCartCount();
    document.addEventListener('click', function(e) {
      if (e.target.closest('.cart-popup')) return;
      if (!e.target.closest('.cart-icon') && !e.target.closest('.cart-box')) {
        document.getElementById('cartPopup').style.display = 'none';
      }
    });
  </script>

  <!-- Google Sheet Script LAST mein -->
  <script src="google-script.js"></script>
</body>
</html>